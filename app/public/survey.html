<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BAE Bestie Bingo Survey</title>
  <!-- Latest compiled and minified CSS & JS-->
  <!--Need to redo CSS - very plain jane-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script src='https://code.jquery.com/jquery.js'></script>
  
</head>
<body >
         <!-- User Name and Photo Panel -->
      <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title"><strong>Tell us about yourself!</strong></h3>
            </div>
            <div class="panel-body">
              <h4>Your Full Name</h4>
              <div class="input-group">
                <input id = "name" class="form-control" type="text" name="name" placeholder="John Smith">
                <span class="input-group-addon">(Required)</span>
              </div>  
              <br>
              <h4>Link to a Photo Image</h4>
              <div class="input-group">
                <input id = "photo" class="form-control" type="text" name="name" placeholder="http://yourphotolink.com.jpg/">
                <span class="input-group-addon">(Required)</span>
              </div>
            </div>
          </div>
    
    
          <!-- Quiz Page Questions Panel -->
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title"><strong>Questionnaire</strong></h3>
            </div>
            <div class="panel-body">
              
              <!-- Question 1 -->
              <h4><strong>Question 1</strong></h4>
              <h5>You are the first to take charge in social gatherings or group projects.</h5>
              
                    <select class="chosen-select" id="q1">
                      <option value="" disabled selected>Choose your option</option>
                      <option value="1">1 (Not at all)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (This is totally me!</option>
                    </select>
               <!-- Question 2 -->
               <h4><strong>Question 2</strong></h4>
               <h5>Your best friend's birthday is coming up.  Their one wish is a chocolate cake that wil take you all day to make.  How likely are you to make the cake?</h5>
               
                     <select class="chosen-select" id="q2">
                       <option value="" disabled selected>Choose your option</option>
                       <option value="1">1 (Not at all)</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5 (Yes, this is totally me!)</option>
                     </select>
                 <!-- Question 3 -->
               <h4><strong>Question 3</strong></h4>
               <h5> Your friend is sick and wants to you to keep them company all day and watch Netflix with them.  You already have amazing plans.  How likely are you to cancel your plans?</h5>
               
                     <select class="chosen-select" id="q3">
                       <option value="" disabled selected>Choose your option</option>
                       <option value="1">1 (Not at all)</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5 (Yes, this is totally me!)</option>
                     </select>
                 <!-- Question 4 -->
               <h4><strong>Question 4</strong></h4>
               <h5>You have plans with your friend but they are being guarded by a large angry goose. The only way to get to your friend is to fight the goose. How likely are you to commit to the fight?</h5>
               
                     <select class="chosen-select" id="q4">
                       <option value="" disabled selected>Choose your option</option>
                       <option value="1">1 (Not at all)</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5 (Yes, this is totally me!)</option>
                     </select>   

                  <!-- Question 5 -->
               <h4><strong>Question 5</strong></h4>
               <h5> Your friend has been captured by a evil sea witch. The only way to save them is by wrangling the slippery, ill-tempered sea otters that guard the sea dungeon. How likely are you to wrangle the otters?</h5>
               
                     <select class="chosen-select" id="q5">
                       <option value="" disabled selected>Choose your option</option>
                       <option value="1">1 (Not at all)</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5 (Yes, this is totally me!)</option>
                     </select>
                  <!-- Question 6 -->
              <h4><strong>Question 6</strong></h4>
              <h5> Your friend turns out to be a creature that can only survive by feasting on the souls of the innocent. Do you help your friend find victims to stay alive?</h5>
                      <select class="chosen-select" id="q6">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Not at all)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Yes, this is totally me!)</option>
                      </select>
                
                <!-- Question 7 -->
              <h4><strong>Question 7</strong></h4>
              <h5> You innocently unlock your friends phone.  How much do you want to scroll through their photos, texts, etc?</h5>
                      <select class="chosen-select" id="q7">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Not at all)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Yes, this is totally me!)</option>
                      </select>
                
                <!-- Question 8 -->
              <h4><strong>Question 8</strong></h4>
              <h5>You text your friend but get no response.  How likely are you to text them every 3 - 4 minutes until they answer?</h5>
                      <select class="chosen-select" id="q8">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Not at all)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Yes, this is totally me!)</option>
                      </select>
                  
                       <!-- Question 9 -->
              <h4><strong>Question 9</strong></h4>
              <h5>You are at a bar with friends.  How likely are you to order a round?</h5>
                      <select class="chosen-select" id="q9">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Not at all)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Yes, this is totally me!)</option>
                      </select>

                <!-- Question 10 -->
              <h4><strong>Question 10</strong></h4>
              <h5>You are invited to go camping in the woods with no bathrooms available.  How much do you want to go?</h5>
                      <select class="chosen-select" id="q10">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Not at all)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Yes, this is totally me!)</option>
                      </select>
              </div>
        
             </div>



             <!--findmy match button-->
    
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
      Find my match!</button>

    <!-- modal to show match -->

    
    <div id="resultsModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h2 class="modal-title"><strong>Your new BAE BFF Bestie!!!</strong></h2>
          </div>
          <div class="modal-body">
            <h2 id="matchName"></h2>
            <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>

         
  </body>

  <!-- used chosen for getting results-->
  <script>
    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }
    // gets input
    $("#submit").on("click", function(){
    	function validateForm() {
		  var isValid = true;
		  $('.form-control').each(function() {
		    if ( $(this).val() === '' )
		        isValid = false;
		  });
		  $('.chosen-select').each(function() {
		  	if( $(this).val() === "")
		  		isValid = false
		  })
		  return isValid;
		}
		// makes sure survey coplete
		if (validateForm() == true)
		{
			// makes user profile
	    	var userData = {
	    		name: $("#name").val(),
	    		photo: $("#photo").val(),
          scores: [$("#q1").val(), 
          $("#q2").val(), 
          $("#q3").val(), 
          $("#q4").val(), 
          $("#q5").val(), 
          $("#q6").val(), 
          $("#q7").val(), 
          $("#q8").val(), 
          $("#q9").val(), 
          $("#q10").val()
          ]
	    	};
	    	// grab the URL of the website
	    	var currentURL = window.location.origin;
	    	// AJAX post the data to the api 
	    	$.post(currentURL + "/api/friends", userData, function(data){
	    		// grab the result so that the best match's name and photo are displayed
	    		$("#matchName").text(data.name);
	    		$('#matchImg').attr("src", data.photo);
		    	// show the modal with the best match 
		    	$("#resultsModal").modal('toggle');
	    	});
		}
		else
		{
			alert("Please fill out all fields before submitting!");
		}
    	
    	return false;
    });
  </script>

  

</html>    